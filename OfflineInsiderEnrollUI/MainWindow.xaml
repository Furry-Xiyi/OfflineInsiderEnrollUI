<Window
    x:Class="OfflineInsiderEnrollUI.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:OfflineInsiderEnrollUI"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls">

    <Grid x:Name="RootGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid x:Name="AppTitleBar"
      Height="32"
      VerticalAlignment="Top"
      Background="Transparent">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Orientation="Horizontal"
                Spacing="12"
                Margin="16,0,0,0"
                VerticalAlignment="Center">
                <Image x:Name="AppIcon"
               Width="16"
               Height="16"
               Source="Assets/AppIcon.ico"/>
                <TextBlock x:Uid="AppTitle"
           x:Name="AppTitle"
           VerticalAlignment="Center"/>
            </StackPanel>
        </Grid>

        <!-- NavigationView 顶部导航 -->
        <muxc:NavigationView x:Name="NavView"
                             Grid.Row="1"
                             PaneDisplayMode="Top"
                             IsBackButtonVisible="Collapsed"
                             IsSettingsVisible="True"
                             Background="Transparent"
                             SelectionChanged="NavView_SelectionChanged">

            <!-- 顶部菜单项（只显示图标） -->
            <muxc:NavigationView.MenuItems>
                <muxc:NavigationViewItem
                    x:Name="HomeItem"
                    Icon="Home"
                    Content=""
                    Tag="Home"/>
            </muxc:NavigationView.MenuItems>

            <!-- 内容区 -->
            <Frame x:Name="ContentFrame" Background="Transparent"/>
            
        </muxc:NavigationView>

        <!-- 假 Splash 覆盖层（UWP 风格） -->
        <Grid x:Name="SplashOverlay"
      Grid.RowSpan="2"
      Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
      Visibility="Collapsed"
      Opacity="0"
      IsHitTestVisible="False">

            <StackPanel HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Spacing="12">

                <!-- 这里只定义 Image，不写 Source -->
                <Image x:Name="SplashImage"
               Width="220"
               Height="220"
               Stretch="UniformToFill"/>
            </StackPanel>

        </Grid>
        <!-- ⭐ 全屏遮罩层（必须放在 RootGrid 的最后） -->
        <Grid x:Name="OverlayPanel"
              Grid.RowSpan="2"
              Visibility="Collapsed"
              Background="#80000000"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Stretch"
              Canvas.ZIndex="9999">

            <StackPanel HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Spacing="20">
                <ProgressRing IsActive="True"
                              Width="60"
                              Height="60"/>
                <TextBlock x:Name="OverlayText"
                           Text="正在处理..."
                           FontSize="18"
                           Foreground="White"/>
            </StackPanel>

        </Grid>

    </Grid>
</Window>